var P=Object.defineProperty;var L=(m,e,n)=>e in m?P(m,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):m[e]=n;var T=(m,e,n)=>L(m,typeof e!="symbol"?e+"":e,n);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))a(t);new MutationObserver(t=>{for(const r of t)if(r.type==="childList")for(const o of r.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&a(o)}).observe(document,{childList:!0,subtree:!0});function n(t){const r={};return t.integrity&&(r.integrity=t.integrity),t.referrerPolicy&&(r.referrerPolicy=t.referrerPolicy),t.crossOrigin==="use-credentials"?r.credentials="include":t.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function a(t){if(t.ep)return;t.ep=!0;const r=n(t);fetch(t.href,r)}})();class x{constructor(){T(this,"events",[]);T(this,"weeklyTargetSeconds",25*3600)}setWeeklyTarget(e){this.weeklyTargetSeconds=e*3600}getWeeklyTarget(){return this.weeklyTargetSeconds}getStartOfWeek(){const e=new Date,n=e.getDay(),a=(n===0?-6:1)-n,t=new Date(e);return t.setDate(e.getDate()+a),t.setHours(0,0,0,0),t}getWeeklyWorkTimesLastYear(){const e=new Date,n=[],a=this.getStartOfWeek();for(let t=0;t<52;t++){const r=new Date(a);r.setDate(r.getDate()-t*7),r.setHours(0,0,0,0);const o=new Date(r);o.setDate(o.getDate()+7),o.setHours(0,0,0,0);const i=this.events.filter(l=>l.time>=r&&l.time<o);let u=0;i.forEach((l,c)=>{if(l.event==="WorkStart"){const s=i[c+1];s&&s.event==="WorkEnd"?u+=(s.time.getTime()-l.time.getTime())/1e3:t===0&&(u+=(e.getTime()-l.time.getTime())/1e3)}}),n.unshift({weekStart:new Date(r),workTime:u})}return n}getEventsThisWeek(){const e=this.getStartOfWeek();return this.events.filter(n=>n.time>=e)}calcWorkTimeThisWeek(){let e=0;const n=this.getEventsThisWeek();return n.forEach((a,t)=>{if(a.event==="WorkStart"){const r=n[t+1];r&&r.event==="WorkEnd"?e+=(r.time.getTime()-a.time.getTime())/1e3:e+=(new Date().getTime()-a.time.getTime())/1e3}}),e}getWeeklyProgress(){const e=this.calcWorkTimeThisWeek(),n=this.weeklyTargetSeconds;return{worked:e,target:n,percent:Math.min(100,e/n*100)}}addEvent(e,n=new Date){this.events.push({event:e,time:n})}getEvents(){return this.events}clearEvents(){this.events=[]}save(){const e=JSON.stringify(this.events);localStorage.setItem("timeEvents",e)}get lastEvent(){if(this.events.length!=0)return this.events[this.events.length-1]}load(){const e=localStorage.getItem("timeEvents");if(e){const n=JSON.parse(e);this.events=n.map(a=>({event:a.event,time:new Date(a.time)}))}}calcWorkTime(){let e=0;return this.events.length==0||this.events.forEach((n,a)=>{if(n.event==="WorkStart"){const t=this.events[a+1];t&&t.event==="WorkEnd"?e+=(t.time.getTime()-n.time.getTime())/1e3:e+=(new Date().getTime()-n.time.getTime())/1e3}}),e}createEventButton(e,n,a,t=!1){const r=document.createElement("div");r.className="event-button";const o=document.createElement("button"),i=document.createElement("button");return o.textContent="Start "+a,o.addEventListener("click",()=>{this.addEvent(e),o.style.display="none",i.style.display="block",this.save()}),o.style.display=t?"none":"block",r.appendChild(o),i.textContent="Stop "+a,i.addEventListener("click",()=>{this.addEvent(n),o.style.display="block",i.style.display="none",this.save()}),i.style.display=t?"block":"none",r.appendChild(i),r}reset(){this.events=[],localStorage.removeItem("timeEvents"),this.save()}}const C="modulepreload",I=function(m){return"/timeTracker/"+m},D={},$=function(e,n,a){let t=Promise.resolve();if(n&&n.length>0){let o=function(l){return Promise.all(l.map(c=>Promise.resolve(c).then(s=>({status:"fulfilled",value:s}),s=>({status:"rejected",reason:s}))))};document.getElementsByTagName("link");const i=document.querySelector("meta[property=csp-nonce]"),u=(i==null?void 0:i.nonce)||(i==null?void 0:i.getAttribute("nonce"));t=o(n.map(l=>{if(l=I(l),l in D)return;D[l]=!0;const c=l.endsWith(".css"),s=c?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${l}"]${s}`))return;const d=document.createElement("link");if(d.rel=c?"stylesheet":C,c||(d.as="script"),d.crossOrigin="",d.href=l,u&&d.setAttribute("nonce",u),document.head.appendChild(d),c)return new Promise((g,w)=>{d.addEventListener("load",g),d.addEventListener("error",()=>w(new Error(`Unable to preload CSS for ${l}`)))})}))}function r(o){const i=new Event("vite:preloadError",{cancelable:!0});if(i.payload=o,window.dispatchEvent(i),!i.defaultPrevented)throw o}return t.then(o=>{for(const i of o||[])i.status==="rejected"&&r(i.reason);return e().catch(r)})};function B(m={}){const{immediate:e=!1,onNeedRefresh:n,onOfflineReady:a,onRegistered:t,onRegisteredSW:r,onRegisterError:o}=m;let i,u;const l=async(s=!0)=>{await u};async function c(){if("serviceWorker"in navigator){if(i=await $(async()=>{const{Workbox:s}=await import("./workbox-window.prod.es5-B9K5rw8f.js");return{Workbox:s}},[]).then(({Workbox:s})=>new s("/timeTracker/sw.js",{scope:"/timeTracker/",type:"classic"})).catch(s=>{o==null||o(s)}),!i)return;i.addEventListener("activated",s=>{(s.isUpdate||s.isExternal)&&window.location.reload()}),i.addEventListener("installed",s=>{s.isUpdate||a==null||a()}),i.register({immediate:e}).then(s=>{r?r("/timeTracker/sw.js",s):t==null||t(s)}).catch(s=>{o==null||o(s)})}}return u=c(),l}const N=B({onNeedRefresh(){confirm("New content available. Refresh?")&&N(!0)},onOfflineReady(){console.log("App is ready to work offline")}}),h=new x;function _(){var o,i,u,l;h.load();let m=!1;((o=h.lastEvent)==null?void 0:o.event)=="WorkStart"&&(m=!0);const e=h.createEventButton("WorkStart","WorkEnd","Work",m);(i=document.getElementById("app"))==null||i.append(e);const n=document.createElement("div");(u=document.getElementById("app"))==null||u.append(n);const a=document.createElement("div");(l=document.getElementById("app"))==null||l.append(a);const t=["Monday","Tuesday","Wednesday","Thursday","Friday"],r=[];t.forEach(()=>{var s;const c=document.createElement("div");(s=document.getElementById("app"))==null||s.append(c),r.push(c)}),setInterval(()=>{const c=h.calcWorkTime();let s="";c>3600?s=Math.floor(c/3600)+" hours and "+Math.floor(c%3600/60)+" minutes":c>60?s=Math.floor(c/60)+" minutes and "+Math.floor(c%60)+" seconds":s=Math.floor(c)+" seconds",n.textContent=`Total Work Time: ${s}`;const d=h.getWeeklyProgress();let g="";d.worked>3600?g=Math.floor(d.worked/3600)+" hours and "+Math.floor(d.worked%3600/60)+" minutes":d.worked>60?g=Math.floor(d.worked/60)+" minutes and "+Math.floor(d.worked%60)+" seconds":g=Math.floor(d.worked)+" seconds",a.textContent=`This Week: ${g} (${d.percent.toFixed(1)}% of target)`;const w=h.getStartOfWeek(),b=h.getWeeklyTarget()/5;for(let v=0;v<5;v++){const y=new Date(w);y.setDate(y.getDate()+v),y.setHours(0,0,0,0);const W=new Date(y);W.setHours(23,59,59,999);const S=h.getEvents().filter(k=>k.time>=y&&k.time<=W);let f=0;S.forEach((k,O)=>{if(k.event==="WorkStart"){const E=S[O+1];E&&E.event==="WorkEnd"?f+=(E.time.getTime()-k.time.getTime())/1e3:f+=(new Date().getTime()-k.time.getTime())/1e3}});let p="";f>3600?p=Math.floor(f/3600)+"h "+Math.floor(f%3600/60)+"m":f>60?p=Math.floor(f/60)+"m "+Math.floor(f%60)+"s":p=Math.floor(f)+"s";const M=Math.min(100,f/b*100);r[v].textContent=`${t[v]}: ${p} (${M.toFixed(1)}% of daily target)`}},1e3),h.save()}_();window.time=h;
