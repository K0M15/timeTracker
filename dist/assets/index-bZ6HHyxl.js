var O=Object.defineProperty;var L=(d,e,n)=>e in d?O(d,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):d[e]=n;var T=(d,e,n)=>L(d,typeof e!="symbol"?e+"":e,n);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))a(t);new MutationObserver(t=>{for(const o of t)if(o.type==="childList")for(const i of o.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&a(i)}).observe(document,{childList:!0,subtree:!0});function n(t){const o={};return t.integrity&&(o.integrity=t.integrity),t.referrerPolicy&&(o.referrerPolicy=t.referrerPolicy),t.crossOrigin==="use-credentials"?o.credentials="include":t.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function a(t){if(t.ep)return;t.ep=!0;const o=n(t);fetch(t.href,o)}})();class x{constructor(){T(this,"events",[]);T(this,"weeklyTargetSeconds",25*3600)}setWeeklyTarget(e){this.weeklyTargetSeconds=e*3600}getWeeklyTarget(){return this.weeklyTargetSeconds}getStartOfWeek(){const e=new Date,n=e.getDay(),a=(n===0?-6:1)-n,t=new Date(e);return t.setDate(e.getDate()+a),t.setHours(0,0,0,0),t}getEventsThisWeek(){const e=this.getStartOfWeek();return this.events.filter(n=>n.time>=e)}calcWorkTimeThisWeek(){let e=0;const n=this.getEventsThisWeek();return n.forEach((a,t)=>{if(a.event==="WorkStart"){const o=n[t+1];o&&o.event==="WorkEnd"?e+=(o.time.getTime()-a.time.getTime())/1e3:e+=(new Date().getTime()-a.time.getTime())/1e3}}),e}getWeeklyProgress(){const e=this.calcWorkTimeThisWeek(),n=this.weeklyTargetSeconds;return{worked:e,target:n,percent:Math.min(100,e/n*100)}}addEvent(e,n=new Date){this.events.push({event:e,time:n})}getEvents(){return this.events}clearEvents(){this.events=[]}save(){const e=JSON.stringify(this.events);localStorage.setItem("timeEvents",e)}get lastEvent(){if(this.events.length!=0)return this.events[this.events.length-1]}load(){const e=localStorage.getItem("timeEvents");if(e){const n=JSON.parse(e);this.events=n.map(a=>({event:a.event,time:new Date(a.time)}))}}calcWorkTime(){let e=0;return this.events.length==0||this.events.forEach((n,a)=>{if(n.event==="WorkStart"){const t=this.events[a+1];t&&t.event==="WorkEnd"?e+=(t.time.getTime()-n.time.getTime())/1e3:e+=(new Date().getTime()-n.time.getTime())/1e3}}),e}createEventButton(e,n,a,t=!1){const o=document.createElement("div");o.className="event-button";const i=document.createElement("button"),s=document.createElement("button");return i.textContent="Start "+a,i.addEventListener("click",()=>{this.addEvent(e),i.style.display="none",s.style.display="block",this.save()}),i.style.display=t?"none":"block",o.appendChild(i),s.textContent="Stop "+a,s.addEventListener("click",()=>{this.addEvent(n),i.style.display="block",s.style.display="none",this.save()}),s.style.display=t?"block":"none",o.appendChild(s),o}reset(){this.events=[],localStorage.removeItem("timeEvents"),this.save()}}const C="modulepreload",I=function(d){return"/timeTracker/"+d},b={},$=function(e,n,a){let t=Promise.resolve();if(n&&n.length>0){let i=function(m){return Promise.all(m.map(l=>Promise.resolve(l).then(r=>({status:"fulfilled",value:r}),r=>({status:"rejected",reason:r}))))};document.getElementsByTagName("link");const s=document.querySelector("meta[property=csp-nonce]"),h=(s==null?void 0:s.nonce)||(s==null?void 0:s.getAttribute("nonce"));t=i(n.map(m=>{if(m=I(m),m in b)return;b[m]=!0;const l=m.endsWith(".css"),r=l?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${m}"]${r}`))return;const c=document.createElement("link");if(c.rel=l?"stylesheet":C,l||(c.as="script"),c.crossOrigin="",c.href=m,h&&c.setAttribute("nonce",h),document.head.appendChild(c),l)return new Promise((v,E)=>{c.addEventListener("load",v),c.addEventListener("error",()=>E(new Error(`Unable to preload CSS for ${m}`)))})}))}function o(i){const s=new Event("vite:preloadError",{cancelable:!0});if(s.payload=i,window.dispatchEvent(s),!s.defaultPrevented)throw i}return t.then(i=>{for(const s of i||[])s.status==="rejected"&&o(s.reason);return e().catch(o)})};function B(d={}){const{immediate:e=!1,onNeedRefresh:n,onOfflineReady:a,onRegistered:t,onRegisteredSW:o,onRegisterError:i}=d;let s,h;const m=async(r=!0)=>{await h};async function l(){if("serviceWorker"in navigator){if(s=await $(async()=>{const{Workbox:r}=await import("./workbox-window.prod.es5-B9K5rw8f.js");return{Workbox:r}},[]).then(({Workbox:r})=>new r("/timeTracker/sw.js",{scope:"/timeTracker/",type:"classic"})).catch(r=>{i==null||i(r)}),!s)return;s.addEventListener("activated",r=>{(r.isUpdate||r.isExternal)&&window.location.reload()}),s.addEventListener("installed",r=>{r.isUpdate||a==null||a()}),s.register({immediate:e}).then(r=>{o?o("/timeTracker/sw.js",r):t==null||t(r)}).catch(r=>{i==null||i(r)})}}return h=l(),m}const N=B({onNeedRefresh(){confirm("New content available. Refresh?")&&N(!0)},onOfflineReady(){console.log("App is ready to work offline")}}),f=new x;function _(){var i,s,h,m;f.load();let d=!1;((i=f.lastEvent)==null?void 0:i.event)=="WorkStart"&&(d=!0);const e=f.createEventButton("WorkStart","WorkEnd","Work",d);(s=document.getElementById("app"))==null||s.append(e);const n=document.createElement("div");(h=document.getElementById("app"))==null||h.append(n);const a=document.createElement("div");(m=document.getElementById("app"))==null||m.append(a);const t=["Monday","Tuesday","Wednesday","Thursday","Friday"],o=[];t.forEach(()=>{var r;const l=document.createElement("div");(r=document.getElementById("app"))==null||r.append(l),o.push(l)}),setInterval(()=>{const l=f.calcWorkTime();let r="";l>3600?r=Math.floor(l/3600)+" hours and "+Math.floor(l%3600/60)+" minutes":l>60?r=Math.floor(l/60)+" minutes and "+Math.floor(l%60)+" seconds":r=Math.floor(l)+" seconds",n.textContent=`Total Work Time: ${r}`;const c=f.getWeeklyProgress();let v="";c.worked>3600?v=Math.floor(c.worked/3600)+" hours and "+Math.floor(c.worked%3600/60)+" minutes":c.worked>60?v=Math.floor(c.worked/60)+" minutes and "+Math.floor(c.worked%60)+" seconds":v=Math.floor(c.worked)+" seconds",a.textContent=`This Week: ${v} (${c.percent.toFixed(1)}% of target)`;const E=f.getStartOfWeek(),D=f.getWeeklyTarget()/5;for(let p=0;p<5;p++){const y=new Date(E);y.setDate(y.getDate()+p),y.setHours(0,0,0,0);const W=new Date(y);W.setHours(23,59,59,999);const S=f.getEvents().filter(g=>g.time>=y&&g.time<=W);let u=0;S.forEach((g,P)=>{if(g.event==="WorkStart"){const w=S[P+1];w&&w.event==="WorkEnd"?u+=(w.time.getTime()-g.time.getTime())/1e3:u+=(new Date().getTime()-g.time.getTime())/1e3}});let k="";u>3600?k=Math.floor(u/3600)+"h "+Math.floor(u%3600/60)+"m":u>60?k=Math.floor(u/60)+"m "+Math.floor(u%60)+"s":k=Math.floor(u)+"s";const M=Math.min(100,u/D*100);o[p].textContent=`${t[p]}: ${k} (${M.toFixed(1)}% of daily target)`}},1e3),f.save()}_();window.time=f;
